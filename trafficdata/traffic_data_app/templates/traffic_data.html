{% extends 'base_generic.html' %}

{% block content %}
  <h2>Traffic Data</h2>
<button onclick="location.href='{% url "reload_data" %}'">Reload Data</button>
<button onclick="location.href='{% url "persist_data" %}'">Persist Data</button>
<form method="POST" action="{% url 'delete_selected_data' %}">
  {% csrf_token %}  
<table>
    <tr>
      <th>Select</th>
      <th>Unique ID</th>
      <th>Section ID</th>
      <th>Highway</th>
      <th>Section</th>
      <th>Section Length</th>
      <th>Section Description</th>
      <th>Date</th>
      <th>Description</th>
      <th>Group</th>
      <th>Type</th>
      <th>County</th>
      <th>ADT</th>
      <th>Direction</th>
    </tr>
    {% for dto in traffic_data %}
    <tr>
      <td><input type="checkbox" name="selected_data" value="{{ dto.id }}"></td>
      <td>{{ dto.id }}</td>
      <td>{{ dto.sectionID }}</td>
      <td>{{ dto.highway }}</td>
      <td>{{ dto.section }}</td>
      <td>{{ dto.sectionLength }}</td>
      <td>{{ dto.sectionDescription }}</td>
      <td>{{ dto.date }}</td>
      <td>{{ dto.description }}</td>
      <td>{{ dto.group }}</td>
      <td>{{ dto.type }}</td>
      <td>{{ dto.county }}</td>
      <td>{{ dto.adt }}</td>
      <td>{{ dto.direction }}</td>
      <td><a href="{% url 'edit_data' dto.id %}">Edit</a></td>
      <td><a href="{% url 'delete_data' dto.id %}">Delete</a></td>    
    </tr>
    {% endfor %}
  </table>
  <button type="submit">Delete Selected</button>
</form>
{% endblock %}